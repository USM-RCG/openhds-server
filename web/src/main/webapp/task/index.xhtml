<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets" template="/templates/default.xhtml">

    <ui:define name="title">OpenHDS - Tasks</ui:define>

    <ui:define name="display">

        <h:outputText value="#{navController.breadcrumbTrail}" />

        <h1>Tasks</h1>
        <h:messages id="errors" globalOnly="true" />
        <h:form id="taskForm">

            <h:outputText value="Generate Field Worker XML File" />
            <br />
            <h:commandButton action="#{taskBean.startFieldWorkerTask}" value="Queue Field Worker Task" />
            <br />
            <br />

            <h:outputText value="Generate Location Hierarchy XML File" />
            <br />
            <h:commandButton action="#{taskBean.startLocationHierarchyTask}" value="Queue Location Hierarchy Task" />
            <br />
            <br />

            <h:outputText value="Generate Individual XML File" />
            <br />
            <h:commandButton action="#{taskBean.startIndividualTask}" value="Queue Individual Task" />
            <br />
            <br />

            <h:outputText value="Generate Location XML File" />
            <br />
            <h:commandButton action="#{taskBean.startLocationTask}" value="Queue Location Task" />
            <br />
            <br />

            <h:outputText value="Generate Relationship XML File" />
            <br />
            <h:commandButton action="#{taskBean.startRelationshipTask}" value="Queue Relationship Task" />
            <br />
            <br />

            <h:outputText value="Generate Social Group XML File" />
            <br />
            <h:commandButton action="#{taskBean.startSocialGroupTask}" value="Queue Social Group Task" />
            <br />
            <br />
            
            <h:outputText value="Generate Membership XML File" />
            <br />
            <h:commandButton action="#{taskBean.startMembershipTask}" value="Queue Membership Task" />
            <br />
            <br />

            <h:outputText value="Generate Visit XML File" />
            <br />
            <h:outputText value="Round Number:" />
            <br />
            <h:inputText value="#{taskBean.roundNumber}" /> <h:commandButton action="#{taskBean.startVisitTask}" value="Queue Visit Task" />
            <br />
            <br />

            <h:outputText value="Generate Mobile DB" />
            <br />
            <h:commandButton action="#{taskBean.startMobileDBTask}" value="Queue Mobile DB Task" />
            <br />
            <br />

            <h:commandButton action="#{taskBean.startAllTasks}" value="Queue All Tasks" />
            <br />
            <br />

            <h:outputText value="Next Scheduled Run: " /> <h:outputText value="#{taskBean.nextScheduledRun}" />
            <br />
            <br />
            <a href="http://www.quartz-scheduler.org/documentation/quartz-1.x/tutorials/crontrigger" target="_blank">
                <h:outputText value="Schedule" /></a>
            <br />
            <h:inputText value="#{taskBean.cronSchedule}" />
            <h:commandButton action="#{taskBean.scheduleAllTasks}" value="Schedule All Tasks" />
            <h:commandButton action="#{taskBean.cancelScheduledTasks}" value="Cancel Scheduled Tasks" />

        </h:form>

        <br />
        <br />

        <h:dataTable var="task" value="#{taskBean.tasks}" styleClass="openhds-table">
            <h:column>
                <f:facet name="header">
                    <h:outputText value="Task Name" />
                </f:facet>

                <h:outputText value="#{task.taskName}" />
            </h:column>
            <h:column>
                <f:facet name="header">
                    <h:outputText value="Total Items Processed" />
                </f:facet>

                <h:outputText value="#{task.totalCount}" />
            </h:column>
            <h:column>
                <f:facet name="header">
                    <h:outputText value="Start Time Stamp" />
                </f:facet>

                <h:outputText value="#{task.taskStartDate}" converter="#{timestampConverter}" />
            </h:column>
            <h:column>
                <f:facet name="header">
                    <h:outputText value="End Time Stamp" />
                </f:facet>

                <h:outputText value="#{task.taskEndDate}" converter="#{timestampConverter}" />
            </h:column>
            <h:column>
                <f:facet name="header">
                    <h:outputText value="MD5 Hash" />
                </f:facet>

                <h:outputText value="#{task.md5Hash}" />
            </h:column>
        </h:dataTable>
    </ui:define>
</ui:composition>
