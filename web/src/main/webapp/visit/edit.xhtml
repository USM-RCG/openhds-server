<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:o="http://openfaces.org/"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      xmlns:ui="http://java.sun.com/jsf/facelets">
		  
    <h:head>
    </h:head>
    <body>
    	<ui:composition template="/templates/default.xhtml">
			<ui:define name="title">OpenHDS - Edit Visit</ui:define>
		
			<ui:param name="crud" value="#{visitCrud}" />
			
            <ui:define name="listing">
                <ui:include src="list.xhtml" />
            </ui:define>
            
            <ui:define name="display">
            
        		<h:outputText value="#{navController.breadcrumbTrail}" />
            
        		<h1><h:outputText value="#{msg.visitEdit}" /></h1>
        		<h:messages id="errors" globalOnly="true" />
        		<h:form id="form">        				
            		<h:panelGrid columns="3">
                		<h:outputText value="#{msg.visitId}:"/>
                		<h:inputText styleClass="visit" autocomplete="off" id="extId" value="#{visitCrud.item.extId}" disabled="true"/>
                		<h:message for="extId" errorClass="error" errorStyle="color: red" infoStyle="color: green"/>

                		<h:outputText value="#{msg.fieldWorkerId}:"/>
                		<h:inputText styleClass="collectedBy" autocomplete="off" id="fwId" value="#{visitCrud.item.collectedBy}" converter="#{fieldWorkerExtIdConverter}" />
                		<h:message for="fwId" errorClass="error" errorStyle="color: red" infoStyle="color: green"/>
                
                		<h:outputText value="#{msg.locationId}:"/>
                		<h:inputText styleClass="location" autocomplete="off" id="location" value="#{visitCrud.item.visitLocation}" converter="#{locationExtIdConverter}" disabled="true"/>
                		<h:message for="location" errorClass="error" errorStyle="color: red" infoStyle="color: green"/>

						<h:outputText value="#{msg.visitDate} (#{siteProperties.dateFormat})" />
			    		<o:dateChooser id="visitDate" value="#{visitCrud.visitDate}" pattern="#{siteProperties.dateFormat}" /> 
                		<h:message for="visitDate" errorClass="error" errorStyle="color: red" infoStyle="color: green"/>
               
                		<h:outputText value="#{msg.visitRoundNumber}:"/>
                		<h:inputText id="roundNum" value="#{visitCrud.item.roundNumber}" converter="#{defaultConverter}" disabled="true" />
                		<h:message for="roundNum" errorClass="error" errorStyle="color: red" infoStyle="color: green"/>
         			</h:panelGrid>
	         		<script>
	  		 			document.getElementById('form:fwId').focus();
	  		 		</script>
					<br />
					<h:commandButton action="#{visitCrud.edit}" value="#{msg.lblSave}">
	    				<f:setPropertyActionListener target="#{jsfService.itemId}" value="#{visitCrud.item.uuid}" />
	    			</h:commandButton>
        		</h:form>
        	</ui:define>
    	</ui:composition>
	</body>
</html>
