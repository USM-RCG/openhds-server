<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions">
    <h1>#{msg.users}</h1>
    <ui:include src="/search/searchBox.xhtml">
        <ui:param name="crud" value="#{userCrud}"/>
    </ui:include>
    <h:form>
        <ui:include src="/snippets/paging.xhtml">
            <ui:param name="currentCrud" value="#{userCrud}"/>
        </ui:include>
        <div class="data-table">
            <div class="center">
                <h:messages errorClass="error" style="width:100%" globalOnly="false"/>
            </div>
            <h:outputText escape="false" value="#{msg.userEmpty}" rendered="#{userCrud.pager.totalCount == 0}"/>
            <h:panelGroup rendered="#{fn:length(userCrud.pagedItems) > 0}">
                <h:dataTable value="#{userCrud.pagedItems}" var="user"
                             columnClasses="center,center,center,actions"
                             rowClasses="#{userCrud.itemCSSClasses}"
                             width="100%">
                    <h:column headerClass="width1">
                        <f:facet name="header">
                            <h:outputText value="#{msg.userUsername}"/>
                        </f:facet>
                        <h:outputText value="#{user.username}"/>
                    </h:column>
                    <h:column headerClass="width1">
                        <f:facet name="header">
                            <h:outputText value="#{msg.userFullName}"/>
                        </f:facet>
                        <h:outputText value="#{user.fullName}"/>
                    </h:column>
                    <h:column headerClass="width1">
                        <f:facet name="header">
                            <h:outputText value="#{msg.userLastLogin}"/>
                        </f:facet>
                        <h:outputText value="#{user.lastLogin}"/>
                    </h:column>
                    <h:column headerClass="width3">
                        <f:facet name="header">
                            <h:outputText escape="false" value=""/>
                        </f:facet>
                        <h:commandLink immediate="true" action="#{userCrud.detailSetup}">
                            <h:graphicImage title="view" style="border: 0;" value="/resources/icons/details.png"/>
                            <f:param name="itemId" value="#{user.uuid}"/>
                        </h:commandLink>
                        <h:outputText value=" "/>
                        <h:commandLink action="#{userCrud.editSetup}">
                            <h:graphicImage title="edit" style="border: 0;" value="/resources/icons/edit.png"/>
                            <f:param name="itemId" value="#{user.uuid}"/>
                        </h:commandLink>
                        <h:outputText value=" "/>
                        <h:commandLink action="#{userCrud.delete}">
                            <h:graphicImage title="delete" style="border: 0;" value="/resources/icons/delete.png"/>
                            <f:param name="itemId" value="#{user.uuid}"/>
                        </h:commandLink>
                    </h:column>
                </h:dataTable>
            </h:panelGroup>
        </div>
    </h:form>
</ui:composition>